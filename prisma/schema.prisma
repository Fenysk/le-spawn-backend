generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Game {
  id         String @id @unique @default(uuid())
  igdbGameId Int?   @unique

  barcodes String[]

  category GameCategoryEnum
  coverUrl String?

  firstReleaseDate DateTime

  franchises String[]
  genres     String[]

  name String

  screenshotsUrl String[]

  storyline String?
  summary   String?

  platformsRelation  ManyGamePlatform[]   @relation("ManyGamePlatformToGame")
  gameCollectionItem GameCollectionItem[] @relation("GameCollectionItemToGame")
}

model Platform {
  id             String @id @unique @default(uuid())
  igdbPlatformId Int?   @unique

  name         String
  abbreviation String

  generation Int?

  gamesRelation ManyGamePlatform[] @relation("ManyGamePlatformToPlatform")
}

model GameCollectionItem {
  id String @id @unique @default(uuid())

  hasBox   Boolean
  hasGame  Boolean
  hasPaper Boolean

  stateBox   String?
  stateGame  String?
  statePaper String?

  gameId String?
  game   Game?   @relation("GameCollectionItemToGame", fields: [gameId], references: [id])
}

model ManyGamePlatform {
  game   Game   @relation("ManyGamePlatformToGame", fields: [gameId], references: [id])
  gameId String

  platform   Platform @relation("ManyGamePlatformToPlatform", fields: [platformId], references: [id])
  platformId String

  @@id([gameId, platformId])
  @@unique([gameId, platformId])
}

enum GameCategoryEnum {
  mainGame
  dlcAddon
  expansion
  bundle
  standaloneExpansion
  mod
  episode
  season
  remake
  remaster
  expandedGame
  port
  fork
  pack
  update
}
